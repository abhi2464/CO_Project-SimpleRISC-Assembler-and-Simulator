register_add={
    "00000":"00000000000000000000000000000000",
    "00001":"00000000000000000000000000000010",
    "00010":"11111111111111111111111111111101",
    "00011":"00000000000000000000000000000000",
    "00100":"00000000000000000000000000000000",
    "00101":"00000000000000000000000000000000",
    "00110":"00000000000000000000000000000000",
    "00111":"00000000000000000000000000000000",
    "01000":"00000000000000000000000000000000",
    "01001":"00000000000000000000000000000000",
    "01010":"00000000000000000000000000000000",
    "01011":"00000000000000000000000000000000",
    "01100":"00000000000000000000000000000000",
    "01101":"00000000000000000000000000000000",
    "01110":"00000000000000000000000000000000",
    "01111":"00000000000000000000000000000000",
    "10000":"00000000000000000000000000000000",
    "10001":"00000000000000000000000000000000",
    "10010":"00000000000000000000000000000000",
    "10011":"00000000000000000000000000000000",
    "10100":"00000000000000000000000000000000",
    "10101":"00000000000000000000000000000000",
    "10110":"00000000000000000000000000000000",
    "10111":"00000000000000000000000000000000",
    "11000":"00000000000000000000000000000000",
    "11001":"00000000000000000000000000000000",
    "11010":"00000000000000000000000000000000",
    "11011":"00000000000000000000000000000000",
    "11100":"00000000000000000000000000000000",
    "11101":"00000000000000000000000000000000",
    "11110":"00000000000000000000000000000000",
    "11111":"00000000000000000000000000000000"
}

data_mem={
    "65536":"00000000000000000000000000000000",
    "65540":"00000000000000000000000000000000",
    "65544":"00000000000000000000000000000000",
    "65548":"00000000000000000000000000000000",
    "65552":"00000000000000000000000000000000",
    "65556":"00000000000000000000000000000000",
    "65560":"00000000000000000000000000000000",
    "65564":"00000000000000000000000000000000",
    "65568":"00000000000000000000000000000000",
    "65572":"00000000000000000000000000000000",
    "65576":"00000000000000000000000000000000",
    "65580":"00000000000000000000000000000000",
    "65584":"00000000000000000000000000000000",
    "65588":"00000000000000000000000000000000",
    "65592":"00000000000000000000000000000000",
    "65596":"00000000000000000000000000000000",
    "65600":"00000000000000000000000000000000",
    "65604":"00000000000000000000000000000000",
    "65608":"00000000000000000000000000000000",
    "65612":"00000000000000000000000000000000",
    "65616":"00000000000000000000000000000000",
    "65620":"00000000000000000000000000000000",
    "65624":"00000000000000000000000000000000",
    "65628":"00000000000000000000000000000000",
    "65632":"00000000000000000000000000000000",
    "65636":"00000000000000000000000000000000",
    "65640":"00000000000000000000000000000000",
    "65644":"00000000000000000000000000000000",
    "65648":"00000000000000000000000000000000",
    "65652":"00000000000000000000000000000000",
    "65656":"00000000000000000000000000000000",
    "65660":"00000000000000000000000000000000"
}

with open("input.txt", 'r') as file:
    data = file.readlines()

with open("output.txt", 'w') as file:
    file.writelines("")

for j in range(len(data)):
    if data[j].strip()=='\n':
        pass
    else:
        data[j]=data[j].strip()

#To Convert a Binary number to decimal
def deci(x, bits):
    assert len(x) <= bits
    n = int(x, 2)
    s = 1 << (bits - 1)
    return (n & s - 1) - (n & s)

PC=-4 #Program Counter
def r_type(x):
    bini = lambda x : ''.join(reversed( [str((x >> i) & 1) for i in range(32)] ) )
    func=x[17:20]
    rd=x[20:25]
    rs1=x[12:17]
    rs2=x[7:12]
    if func=="000":
        #add
        ans=deci(register_add[rs1],32)+deci(register_add[rs2],32)
        register_add[rd]=bini(ans)

    elif  func=="000" and x[0:7]=="0100000":
        #sub
        ans=deci(register_add[rs1],32)-deci(register_add[rs2],32)
        register_add[rd]=bini(ans)

    elif func=="001":
        #sll
        ans=deci(register_add(rs1),32)<<int(register_add[rs2][27:32],2)
        register_add[rd]=bini(ans)

    elif func=="010":
        #slt
        if deci(register_add(rs1),32)<deci(register_add(rs2),32):
            register_add[rd]=bini(1)

    elif func=="011":
        #sltu
        if int(register_add(rs1),2)<int(register_add(rs2),2):
            register_add[rd]=bini(1)
    
    elif func=="100":
        #xor
        ans=deci(register_add[rs1],32)^deci(register_add[rs2],32)
        register_add[rd]=bini(ans)

    elif func=="101":
        #srl
        ans=deci(register_add(rs1),32)>>int(register_add[rs2][27:32],2)
        register_add[rd]=bini(ans)

    elif func=="110":
        #or
        ans=deci(register_add[rs1],32)|deci(register_add[rs2],32)
        register_add[rd]=bini(ans)
    
    elif func=="111":
        #and
        ans=deci(register_add[rs1],32)&deci(register_add[rs2],32)
        register_add[rd]=bini(ans)

# print(data)
for x in data:
    if x[25:len(x)]=="0110011":
        PC+=4
        r_type(x)
    
    elif x=="00000000000000000000000001100011":
        PC+=4
        break
with open("output.txt", 'a') as file:
    bini = lambda x : ''.join(reversed( [str((x >> i) & 1) for i in range(32)] ) )
    file.write(bini(PC))
    file.write(" ")
    for i in register_add:
        file.write(register_add[i])
        file.write(" ")
    file.write("\n")
    
    for j in data_mem:
        file.write(data_mem[j])
        file.write("\n")
print (register_add)